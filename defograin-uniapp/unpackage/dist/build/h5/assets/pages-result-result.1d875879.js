import{m as e,n as s,s as l,o as t,d as a,w as o,k as i,f as r,t as d,g as n,e as c,r as h,F as u,y as m,S as f,v as g,x as _,j as p}from"./index-9cc2789b.js";import{d as x,b as F,e as I,_ as k}from"./newLogo.cf92213c.js";import{_ as b}from"./_plugin-vue_export-helper.1b428a4d.js";const v=b({data:()=>({lastTap:0,tapTimeout:null,sidebarItems:[{title:"单例运行",url:"../index/index",active:!1},{title:"文件库",url:"../files/files",active:!1},{title:"算法库",url:"../alglist/alglist",active:!1},{title:"运行结果",url:"../result/result",active:!0}],currentMode:"fog",imageUrl:"",tr_imgs:[],results:[],hasres:!1,folders:[],selectedFolderIndex:null,indexName:"",scrollIntoView:""}),onShow(){this.timer=setInterval((()=>{x("").then((s=>{this.folders=s.data,""!=e().globalData.result_url&&(this.selectedFolderIndex=this.folders.length-1,F("upload_"+this.folders[this.selectedFolderIndex].name,this.currentMode).then((e=>{this.results=e.data,console.log(this.hasResults)})),e().globalData.result_url="")}))}),1e3)},onHide(){clearInterval(this.timer)},mounted(){x("").then((e=>{if(this.folders=e.data,console.log(this.folders),console.log("indexName",this.indexName),""!=this.indexName)for(var s=0;s<this.folders.length;s++)console.log(this.indexName,this.folders[s].name),this.indexName==this.folders[s].name&&(console.log(1234),this.selectedFolderIndex=s,F("upload_"+folder.name,this.currentMode).then((e=>{this.results=e.data})))}))},computed:{filteredFolders(){return this.folders.filter((e=>e.mode===this.currentMode))},hasResults(){return this.results.length>0}},methods:{handleTap(e,s){const l=Date.now();this.lastTap&&l-this.lastTap<300?(clearTimeout(this.tapTimeout),this.handleDoubleClick(e,s)):this.tapTimeout=setTimeout((()=>{this.handleSingleClick(e,s)}),300),this.lastTap=l},handleSingleClick(e,s){console.log("Single tap"),this.selectFolder(e,s)},handleDoubleClick(e,s){console.log("Double tap"),this.renameFolder(e,s)},handleSidebarItemClick(e){console.log("点击了菜单项:",e),s({url:e.url})},selectMode(e){this.currentMode=e,this.results=[],this.selectedFolderIndex=null,this.scrollIntoView=""},selectFolder(e,s){this.selectedFolderIndex=s,this.scrollIntoView="folder-"+s,console.log(e.name),F("upload_"+e.name,this.currentMode).then((e=>{this.results=e.data}))},renameFolder(e,s){console.log(s),l({title:"重命名文件夹",content:"请输入新的文件夹名",editable:!0,success:l=>{if(l.confirm){const a=l.content;if(""!==a.trim()){var t=e.name;e.name=a,this.indexName=a,this.$set(this.folders,s,e),I(t,a),x("").then((s=>{if(this.folders=s.data,""!=this.indexName)for(var l=0;l<this.folders.length;l++)console.log(this.indexName,this.folders[l].name),this.indexName==this.folders[l].name&&(console.log(1234),this.selectedFolderIndex=l,this.scrollIntoView="folder-"+l,F("upload_"+e.name,this.currentMode).then((e=>{this.results=e.data})))}))}}}})}}},[["render",function(e,s,l,x,F,I){const b=i,v=m,w=f,T=p;return t(),a(b,null,{default:o((()=>[r(b,{class:"header"},{default:o((()=>[d("img",{class:"logo",src:k,alt:"",srcset:""})])),_:1}),r(b,{class:"sidebar-container"}),r(b,{class:"main-content result"},{default:o((()=>[r(w,{class:"side-folder","scroll-y":"true","show-scrollbar":"false","scroll-into-view":F.scrollIntoView},{default:o((()=>[r(b,{class:"button-container"},{default:o((()=>[r(v,{id:"goRain",onClick:s[0]||(s[0]=e=>I.selectMode("rain"))},{default:o((()=>[n("去雨")])),_:1}),r(v,{id:"goFog",onClick:s[1]||(s[1]=e=>I.selectMode("fog"))},{default:o((()=>[n("去雾")])),_:1})])),_:1}),(t(!0),c(u,null,h(I.filteredFolders,((e,s)=>(t(),a(b,{key:s,id:"folder-"+s,class:g(["folder-item",{selected:F.selectedFolderIndex===s}]),onClick:[l=>I.selectFolder(e,s),l=>I.handleTap(e,s)]},{default:o((()=>[n(_(e.name),1)])),_:2},1032,["id","class","onClick"])))),128))])),_:1},8,["scroll-into-view"]),r(b,{class:"content"},{default:o((()=>[I.hasResults?(t(),a(b,{key:0,class:"image-gallery"},{default:o((()=>[(t(!0),c(u,null,h(F.results,((e,s)=>(t(),a(b,{class:"image-item",key:s},{default:o((()=>[r(T,{class:"image",src:e.url,mode:"aspectFit"},null,8,["src"]),d("a",{href:e.url,class:"title",target:"_blank"},_(e.name),9,["href"])])),_:2},1024)))),128))])),_:1})):(t(),a(b,{key:1,class:""},{default:o((()=>[n(" 暂无上传图片 ")])),_:1}))])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-3c484ebd"]]);export{v as default};
